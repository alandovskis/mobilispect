@startuml
!include C4_Component.puml
!include common.puml

title Mobilispect Mobile Component Diagram

skinparam linetype ortho

Layer(ui, "UI") {
    Component(layout, "Layout", "XML")
    Component(view, "View", "AndroidX Fragment", "UI Logic like using Resources, Navigation, Showing a Toast/Snackbar, Permission Request")
    Component(viewModel, "ViewModel", "AndroidX ViewModel", "Transform application data into UI state")
}

Layer(data, "Data") {
    Component(repo, "Repository", "")
    Component(local, "Local Data Source", "AndroidX Room DAO")
    Component(remote, "Remote Data Source", "WorkManager")
    Component(apiClient, "Cloud API Client", "Retrofit")
}

Cloud()
ContainerDb(db, "Database", "SQLite")

Rel_U(db, local, "Application Data")
Rel_U(local, repo, "Application Data")
Rel_U(repo, viewModel, "Application Data")
Rel_U(viewModel, view, "UI state [LiveData]")
Rel_U(view, layout, "View Binding")

CloudRel_U(cloud, apiClient, "Cloud Data")
CloudRel_U(apiClient, remote, "Cloud Data")
CloudRel_U(remote, repo, "Cloud Data")
CloudRel_D(repo, local, "Cloud Data")

SHOW_LEGEND()
@enduml